<sub-header></sub-header>

<div class="container-fluid row-fluid main-content">
  <div class="span9 action-lists">
    <div class="row-fluid action-list-header">
      <p class="span6">Category</p>
      <input class="span3 calendar" type="date">
      <input class="span3 calendar" type="date">
    </div>
    <div class="main-content-container">
      <div class="row-fluid main-content-header">
      <div class="span6">
        <span>Duration: </span>
        <div class="btn-group">
          <button class="btn pill pill-left" ng-click="loadWeek()">Week</button>
          <button class="btn pill pill-right" ng-click="loadTotal()">Total</button>
        </div>
      </div>
      <div class="span1 excel">
        <i class="icon-th-large"></i>
      </div>
      <ul class="span4 legend">
        <li>
          <span>+/= avg.</span>
          <div class="legend-bar plus-avg"></div>
        </li>
        <li>
          <span>- avg.</span>
          <div class="legend-bar minus-avg"></div>
        </li>
        <li>
          <span>Negative</span>
          <div class="legend-bar negative"></div>
        </li>
        <li>
          <span>Best</span>
          <div class="legend-bar best"></div>
        </li>
      </ul>
    </div>
    <div class="row-fluid table-header span11">
      <div class="span3"></div>
      <div class="span6 upper-header">Avarage Sales &amp; Profit</div>
      <div class="span3 upper-header">Avarage Traffic &amp; Basket</div>
      <table class="categories">
        <thead>
          <tr>
            <th class="span1"><p>Parity</p></th>
            <th class="span1"><p># of Events</p></th>
            <th class="column span2"><p>Incremental <br/>Sales<br/> $Thousands</p></th>
            <th class="span2"><p>Incremental <br/>Volume<br/> $Thousands</p></th>
            <th class="column span2"><p>Incremental <br/>Margin<br/> $Thousands</p></th>
            <th class="span2"><p>Incremental <br/>Profit<br/> $Thousands</p></th>
            <th class="span2 column"><p>Incremental <br/>Transactions<br/> $Thousands</p></th>
            <th class="span2"><p>Incremental <br/>Impact<br/> $Thousands</p></th>
            <th></th>
          </tr>
        </thead>
       <tbody>
          <tr ng-repeat="category in categories">
            <td class="span1 row-title"><a href="#">{{category.item}}</a></td>
            <td class="span1">{{category.numEvents}}</td>
            <td class="span2 column"></td>
            <td class="span2"></td>
            <td class="span2 column"></td>
            <td class="span2"></td>
            <td class="span2 column"></td>
            <td class="span2"></td>
          </tr>
            <div class="bar-charts span9" style="position:relative; left:22%; top:61px; z-index: 9999;">
              <div class="span2 bar-chart" id="bar-sales">
                <chart value='{{cat_inc_sales}}'></chart>
              </div>
              <div class="span2 bar-chart" id="bar-vol">
                <chart value='{{cat_inc_vol}}'></chart>
              </div>
              <div class="span2 bar-chart" id="bar-margin">
                <chart value='{{cat_inc_margin}}'></chart>
              </div>
              <div class="span2 bar-chart" id="bar-profit">
                <chart value='{{cat_inc_profit}}'></chart>
              </div>
              <div class="span2 bar-chart" id="bar-trans">
                <chart value='{{cat_inc_trans}}'></chart>
              </div>
              <div class="span2 bar-chart" id="bar-impact">
                <chart value='{{cat_inc_impact}}'></chart>
              </div>
          </div>
          <tr>
            <td class="row-title">Average</td>
            <td></td>
            <td class="average column" ng-click="showSales()">371</td>
            <td class="average avg" ng-click="showVolume()">74</td>
            <td class="average column" ng-click="showMargin()">80</td>
            <td class="average pos" ng-click="showProfit()">406</td>
            <td class="average column" ng-click="showTrans()">258</td>
            <td class="average" ng-click="showImpact()">14</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div id="time-series" class="row-fluid span11 time-series">
      <chart value='{{timeseries}}'></chart>
    </div>
    </div>
  </div>


  <div class="span3 action-lists">
    <div class="row-fluid action-list-header">
      <p>Action Required</p>
    </div>

    <div ng-repeat="actionItem in categories | action" ng-controller="actionItemCtrl" class="action-item {{actionItem.actionColor}}">
      <p ng-class="{'': !open, 'action-open': open}">
        <span>Action: </span>Promote <span>{{actionItem.item}}</span><br>{{actionItem.action}}
          <span ng-click="toggleOpen()" class="arrow" ng-class="{'arrow-up': open, 'arrow-down': !open}"></span>
      </p>
      <p class="hiddenAction" ng-show="open"}}>
        {{actionItem.hiddenAction}}
      </p>
    </div>

    <div ng-repeat="followUpItem in catDataInc | followUp" ng-controller="actionItemCtrl" class="action-item {{followUpItem.actionColor}}">
      <p>
        <span>Follow Up: </span>Promote <span>{{followUpItem.item}}</span><br>{{followUpItem.followUp}}
        <span ng-click="toggleOpen()" class="arrow" ng-class="{'arrow-up': open, 'arrow-down': !open}"></span>
      </p>
      <p class="hiddenAction" ng-show="open"}}>
        {{followUpItem.hiddenAction}}
      </p>
    </div>

  </div>
</div>
